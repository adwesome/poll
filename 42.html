<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Результаты. Анкета. Сегежа</title>

    <!-- Google tag (gtag.js) -->
    <!--script async src="https://www.googletagmanager.com/gtag/js?id=G-4DSL3R9T5W"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4DSL3R9T5W');
    </script-->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!--script src="https://telegram.org/js/telegram-web-app.js"></script--> <!-- https://core.telegram.org/bots/webapps#initializing-web-apps -->

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <link href="https://cdn.datatables.net/v/bs5/dt-2.1.8/r-3.0.3/datatables.min.css" rel="stylesheet">
    <script src="https://cdn.datatables.net/v/bs5/dt-2.1.8/r-3.0.3/datatables.min.js"></script>

    <!--link href="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.1.6/r-3.0.3/datatables.min.css" rel="stylesheet"> 
    <script src="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.1.6/r-3.0.3/datatables.min.js"></script-->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">

    <style type="text/css">
      body {
        font-family: "Nunito", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
        padding-: 0.5em;
      }
      .container {
        margin-top: 0.7em;
        margin-bottom-: 2em;
        padding: 1em;
      }
      h2 {
        font-weight: 600;
      }

      div.dt-container div.dt-layout-row div.dt-layout-cell.dt-layout-end {
        justify-content: unset;
        margin-left: unset;
        width: 100%;
      }

      #dt-search-0, .dt-search, .dt-input {
        width: calc(100% - 0px);
        margin-left: 0 !important;
      }
      div.dt-container .dt-search input {
        border: 1px solid #dee2e6;
        border-radius: 5px;
        height: 40px;
      }
      .dt-input {
        padding-left: 8px !important;
      }
      .dt-info {
        margin: 0 0 5px 10px;
      }

      .row {
        margin-bottom: 1em;
      }

.justify-content-between {
  display: block;
}
#table- {
  padding: 0 5px;
  border: 1px solid #dee2e6;
  border-radius: 8px;
}
.mt-2 {
  margin-top: 5px !important;
}
#dt-search-0 {
  font-size: 16px;
}
    </style>

    <script type="text/javascript" src="data/orgs.js"></script>
    <script type="text/javascript" src="data/votes.js"></script>

    <script type="text/javascript" src="src/charts.js"></script>
    <script type="text/javascript" src="src/datatable.js"></script>

    <script type="text/javascript" src="results.js"></script>
    <script type="text/javascript"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-lg-6 offset-lg-3">
          <p id="voters"></p>
          <p id="sexes"></p>
          <p id="ages"></p>
          <p id="orgs"></p>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <!--label>Данные:</label><br>
          <div class="btn-group btn-group-sm-" role="group" aria-label="Basic radio toggle button group">
            <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
            <label class="btn btn-outline-primary" for="btnradio1">Фактические</label>

            <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnradio2">Нормализованные</label>

            <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
            <label class="btn btn-outline-primary" for="btnradio3">Приведённые</label>
          </div>
          <div-->
            <!--div style="width: 800px;">
              <canvas id="chart"></canvas>
            </div-->

            <!--p>Фактические - это те данные, которые мы получили, проводя анкетирование. Это данные без каких-либо изменений.</p>
            <p>Нормализованные - это фактические данные, измененные таким образом, чтобы количество женщин и мужчин стало равным. В фактических данных у нас женщин 87%, а мужчин 13% (такой профиль группы "Сегежские Будни", откуда приходили люди заполнять анкету - и этот профиль естественным образом отпечатался на фактических голосах). В нормализованных же данных женщин и мужчин одинаково: по 50%. Как мы этого добились? Для каждой организации мы разделили голоса женщин на 87 (чтобы получить 1%) и затем умножили результат на 50 (чтобы получить 50%). И точно так же для мужчин: разделили мужские голоса за каждую организацию на 13 (чтобы получить 1%) и затем умножили результат на 50 (чтобы получить 50%). Так у нас 50% женщин и 50% мужчин. Нормализованные данные позволяют увидеть картину полнее, с учетом тех, кто не пришел за счет данных от тех, кто пришел (пришедшие мужчины представительствовали за непришедших мужчин своими голосами) и ответить на вопрос: "А если бы мужчин пришло столько же, сколько и женщин, то какой был бы тогда результат?". Равное количество мужчин и женщин справедливо для России примерно до 50 лет (а это почти все фактически проголосовавшие).</p>
            <p>Приведённые - это нормализованные данные, которые мы привели к возрастно-половой пирамиде населения страны. Население каждого крупного населенного пункта в стране имеет ту же форму возростно-половой пирамиды, что и вся страна. Поэтому, если мы знаем, сколько в населенном пункте живет человек, то, благодаря такой пирамиде, мы можем сказать, сколько примерно человек какого пола и возраста живет в этом городе. И далее этот прием дает нам возможность экстраполировать голоса тех лиц пола и возраста, которые пришли, на оставшихся тех, кто не пришли, в той же возрастно-половой группе, которые живут в этом городе. А т.к. в исходных, фактических данных мы имеем голоса из всех возростно-половых групп, то это дает нам возможность экстраполировать эти данные на весь город. С помощью математики.</p>
          </div-->
        </div>
      </div>
      <div class="row" id="table">

        <div class="col-lg-4">
          <label>Данные:</label>
          <select class="form-select" id="data-source">
            <option value="fact">Фактически полученные</option>
            <option value="norm">Нормализованные для полов</option>
            <option value="approx">Нормализованные для полов на весь город</option>
          </select>
        </div>

        <div class="col-lg-3">
          <label>Чистота данных:</label>
          <select class="form-select" id="clarity">
            <option value="all">Все голоса</option>
            <option value="clean">Все голоса, кроме сомнительных</option>
          </select>
        </div>
        <div class="col-lg-2">
          <label>Пол:</label>
          <select class="form-select" id="sex">
            <option value="all">Все</option>
            <option value="f">Женщины</option>
            <option value="m">Мужчины</option>
          </select>
        </div>

        <div class="col-lg-3">
          <label>Категория:</label>
          <select class="form-select" id="category"></select>
        </div>
        
        <div class="col-lg-6 col-md-12 col-sm-12">
          <canvas id="chart"></canvas>
        </div>

        <table id="results" class="display table table-sm table-striped">
          <thead>
            <tr>
              <th>ID</th>
              <th>Название</th>
              <th>Описание</th>
              <th>Категория</th>
              <th>Адрес</th>
              <th>Всего голосов, шт</th>
              <th>Всего голосов, %</th>
              <th>Голосов женщин, шт</th>
              <th>Голосов женщин, %</th>
              <th>Голосов мужчин, шт</th>
              <th>Голосов мужчин, %</th>
            </tr>
          </thead>
          <tbody id="results-tbody"></tbody>
        </table>
        
      </div>
    </div>
  </body>
</html>
