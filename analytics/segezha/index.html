<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Результаты. Анкета. Сегежа</title>

    <!-- Google tag (gtag.js) -->
    <!--script async src="https://www.googletagmanager.com/gtag/js?id=G-4DSL3R9T5W"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4DSL3R9T5W');
    </script-->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <!--script src="https://telegram.org/js/telegram-web-app.js"></script--> <!-- https://core.telegram.org/bots/webapps#initializing-web-apps -->

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <link href="https://cdn.datatables.net/v/bs5/dt-2.1.8/r-3.0.3/datatables.min.css" rel="stylesheet">
    <script src="https://cdn.datatables.net/v/bs5/dt-2.1.8/r-3.0.3/datatables.min.js"></script>

    <!--link href="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.1.6/r-3.0.3/datatables.min.css" rel="stylesheet"> 
    <script src="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.1.6/r-3.0.3/datatables.min.js"></script-->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">

    <style type="text/css">
      body {
        font-family: "Nunito", sans-serif;
        font-optical-sizing: auto;
        font-weight: 400;
        font-style: normal;
        padding-: 0.5em;
      }
      .container {
        margin-top: 0.7em;
        margin-bottom-: 2em;
        padding: 1em;
      }
      h2 {
        font-weight: 600;
      }

      div.dt-container div.dt-layout-row div.dt-layout-cell.dt-layout-end {
        justify-content: unset;
        margin-left: unset;
        width: 100%;
      }

      #dt-search-0, .dt-search, .dt-input {
        width: calc(100% - 0px);
        margin-left: 0 !important;
      }
      div.dt-container .dt-search input {
        border: 1px solid #dee2e6;
        border-radius: 5px;
        height: 40px;
      }
      .dt-input {
        padding-left: 8px !important;
      }
      .dt-info {
        margin: 0 0 5px 10px;
      }

      .row {
        margin-bottom: 0.5em;
      }

      .justify-content-between {
        display: block;
      }
      .mt-2 {
        margin-top: 5px !important;
      }
      #dt-search-0 {
        font-size: 16px;
      }

      .margin-top {
        margin: 1.5em 0;
      }

      .ages-group, select {
        cursor: pointer;
      }

      #content {
        visibility: hidden;
      }
    </style>

    <script type="text/javascript" src="data/orgs.js"></script>
    <script type="text/javascript" src="data/votes.js"></script>

    <script type="text/javascript" src="src/charts.js"></script>
    <script type="text/javascript" src="src/datatable.js"></script>

    <script type="text/javascript" src="results.js"></script>
    <script type="text/javascript"></script>
  </head>
  <body>
    <div class="container" id="content">

      <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Аналитика</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Об источниках данных</button>
        </li>
      </ul>
      <br>
      <div class="tab-content" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
          <div class="row" id="table">

            <!--div class="col-lg-4">
              <label>Данные:</label>
              <select class="form-select" id="data-source" disabled>
                <option value="fact">Фактически полученные</option>
                <option value="approx" disabled>Приведенные на весь город</option>
              </select>
            </div-->

            <div class="col-lg-3">
              <label>Чистота данных:</label>
              <select class="form-select" id="clarity">
                <option value="all">Все анкеты</option>
                <option value="clean">Все анкеты, кроме сомнительных</option>
              </select>
            </div>
            <div class="col-lg-2">
              <label>Пол:</label>
              <select class="form-select" id="sex">
                <option value="all">Все</option>
                <option value="f">Женщины</option>
                <option value="m">Мужчины</option>
              </select>
            </div>

            <div class="col-lg-3">
              <label>Категория:</label>
              <select class="form-select" id="category"></select>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-6 col-md-12 col-sm-12 margin-top">
              <h5>Возрастно-половая пирамида по установленным фильтрам</h5>
              <canvas id="chart"></canvas>
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 margin-top">
              <h5>Возрастно-половая пирамида Сегежи</h5>
              <canvas id="chart-sg"></canvas>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-3 col-md-12 col-sm-12 margin-top">
              <h5>Соотношение женщин и мужчин в выборке</h5>
              <canvas id="chart-sexes"></canvas>
            </div>

            <div class="col-lg-3 col-md-12 col-sm-12 margin-top">
              <h5>Доля женщин в выборке от всех анкетированных женщин</h5>
              <canvas id="chart-females"></canvas>
            </div>

            <div class="col-lg-3 col-md-12 col-sm-12 margin-top">
              <h5>Доля мужчин в выборке от всех анкетированных мужчин</h5>
              <canvas id="chart-males"></canvas>
            </div>

            <div class="col-lg-3 col-md-12 col-sm-12 margin-top">
              <table>
                <tr>
                  <th><h5>Возрастные группы</h5></th>
                  <th><h5>Оц. аудитории по городу</h5></th>
                </tr>
                <tr>
                  <td id="ages"></td>
                  <td>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>
                    -<br>

                  </td>
                </tr>
              </table>
            </div>
          </div>

          <div class="row">
            <table id="results" class="display table table-sm table-striped">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Название</th>
                  <th>Описание</th>
                  <th>Категория</th>
                  <th>Адрес</th>
                  <th>Всего голосов, шт</th>
                  <th>Всего голосов, %</th>
                  <th>Голосов женщин, шт</th>
                  <th>Голосов женщин, %</th>
                  <th>Голосов мужчин, шт</th>
                  <th>Голосов мужчин, %</th>
                </tr>
              </thead>
              <tbody id="results-tbody"></tbody>
            </table>
            
          </div>
        </div>
        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
          <div class="row">
            <div class="col-lg-8">
              <h4>Источники данных</h4>
              <h5>1. Анкеты</h5>
              <p>С помощью <a href="https://vk.com/segezhadays" target="_blank">группы "Сегежские Будни" во Вконтакте</a> мы провели 3-дневное (Пт-Вс, 18.10.2024 - 21.10.2024) анкетирование среди жителей города Сегежа на предмет их любимых организаций города, от которых они хотели бы поучаствовать в розыгрыше новогодних подарков. Так мы получили данные лояльности аудитории для каждой из 180 организаций города.</p>
              <p>Детали анкетирования ниже.</p>
              <ul>
                <li><a href="https://vk.com/segezhadays?w=wall-78535365_55427" target="_blank">Изначальный пост</a> (16:00, 18 октября 2024) во Вконтакте в группе "Сегежские Будни".<br>Был в закрепленных менее 1 суток, затем был снят с закрепленных. Суммарно набрал 32 лайка, 18 репостов, 3.2k+ просмотра.</li>
                <li><a href="https://vk.com/segezhadays?w=wall-78535365_55510" target="_blank">Репост изначального поста</a> (12:00, 19 октября 2024) там же.<br>Был в закрепленных почти 1 сутки. Суммарно набрал 10 лайков, 7 репостов, 2.3k+ просмотров.</li>
                <li>Видео (демо анкеты), участвовавшее в изначальном посте и его репосте, суммарно набрало 5.6k+ просмотров.</li>
                <li><a href="https://vk.com/segezhadays?w=wall-78535365_55576" target="_blank">Пост-напоминание о последнем дне анкитирования</a>. Был в закрепленных 12 часов. Суммарно набрал 15 лайков, 3 репоста, 2.7k+ просмотров.</li>
                <li><a href="https://vk.com/segezhadays?w=wall-78535365_55613">Пост о готовности результатов анкетирования</a> (08:00, 21 октября 2024).<br>Был в закрепленных 1 сутки. Суммарно набрал 18 лайков, 1 репост, 2.4k+ просмотров.</li>
              </ul>

              <h5>2. Population Pyramid</h5>
              <p>На сейте <a href="https://www.populationpyramid.net/russian-federation/2024/" target="_blank">populationpyramid.net</a> можно найти возрастно-половые пирамиды для любых стран, континентов и даже целого мира. Т.к. население Сегежи на 2024 год около 22 тыс. человек, то мы можем пирамиду населения России применить в масштабе к городу, чтобы вычислить, сколько примерно человек какого пола и возраста должны жить в таком городе. Для этого мы население Сегежи 22000 человек делим на 144820422 - население России в 2024 году (получаем k = 0.00015191), и, затем, каждое из "колец" пирамиды России мы умножаем на этот коэффициент, чтобы получить такое же "кольцо", только в масштабе населения искомого города.</p>
              <p>Так мы получили оценку для возрастно-половой пирамиды Сегежи, которая позволяет, в совокупности с данными анкетирования из п.1 давать оценки размерам аудиторий организаций.</p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>
